{"ast":null,"code":"var _jsxFileName = \"D:\\\\AI\\\\_Programs\\\\CBSE\\\\aqnamic\\\\frontend\\\\src\\\\components\\\\ChapterQuestions.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './ChapterQuestions.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChapterQuestions = () => {\n  _s();\n  const [papers, setPapers] = useState([]);\n  const [textbooks, setTextbooks] = useState([]);\n  const [selectedPaper, setSelectedPaper] = useState(null);\n  const [selectedTextbook, setSelectedTextbook] = useState(null);\n  const [chapters, setChapters] = useState([]);\n  const [chapterStats, setChapterStats] = useState([]);\n  const [selectedChapter, setSelectedChapter] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({\n    type: '',\n    text: ''\n  });\n  const [showTextbookModal, setShowTextbookModal] = useState(false);\n  const [textbookPageToShow, setTextbookPageToShow] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [viewerType, setViewerType] = useState('external'); // 'pdf', 'image', 'external', 'embedded'\n  const [pdfLoading, setPdfLoading] = useState(false);\n\n  // Predefined textbooks with chapters and page numbers\n  const defaultTextbooks = {\n    'Physics': [{\n      name: 'NCERT Physics Class 10',\n      pdfUrl: 'https://ncert.nic.in/textbook/pdf/keph101.pdf',\n      externalUrl: 'https://ncert.nic.in/textbook.php?keph1=0-8',\n      imageBasePath: '/textbooks/physics-class10/pages/',\n      chapters: [{\n        name: 'Electricity',\n        pages: '1-20'\n      }, {\n        name: 'Magnetic Effects of Current',\n        pages: '21-40'\n      }, {\n        name: 'Light - Reflection and Refraction',\n        pages: '41-65'\n      }, {\n        name: 'Human Eye and Colourful World',\n        pages: '66-85'\n      }, {\n        name: 'Sources of Energy',\n        pages: '86-105'\n      }]\n    }],\n    'Chemistry': [{\n      name: 'NCERT Chemistry Class 10',\n      pdfUrl: 'https://ncert.nic.in/textbook/pdf/kesc101.pdf',\n      externalUrl: 'https://ncert.nic.in/textbook.php?kesc1=0-8',\n      imageBasePath: '/textbooks/chemistry-class10/pages/',\n      chapters: [{\n        name: 'Chemical Reactions and Equations',\n        pages: '1-18'\n      }, {\n        name: 'Acids, Bases and Salts',\n        pages: '19-35'\n      }, {\n        name: 'Metals and Non-metals',\n        pages: '36-55'\n      }, {\n        name: 'Carbon and its Compounds',\n        pages: '56-80'\n      }, {\n        name: 'Periodic Classification of Elements',\n        pages: '81-95'\n      }]\n    }],\n    'Biology': [{\n      name: 'NCERT Biology Class 10',\n      pdfUrl: 'https://ncert.nic.in/textbook/pdf/kebo101.pdf',\n      externalUrl: 'https://ncert.nic.in/textbook.php?kebo1=0-8',\n      imageBasePath: '/textbooks/biology-class10/pages/',\n      chapters: [{\n        name: 'Life Processes',\n        pages: '1-25'\n      }, {\n        name: 'Control and Coordination',\n        pages: '26-45'\n      }, {\n        name: 'How do Organisms Reproduce',\n        pages: '46-70'\n      }, {\n        name: 'Heredity and Evolution',\n        pages: '71-90'\n      }, {\n        name: 'Our Environment',\n        pages: '91-110'\n      }]\n    }],\n    'Mathematics': [{\n      name: 'NCERT Mathematics Class 10',\n      pdfUrl: 'https://ncert.nic.in/textbook/pdf/kemh101.pdf',\n      externalUrl: 'https://ncert.nic.in/textbook.php?kemh1=0-16',\n      imageBasePath: '/textbooks/mathematics-class10/pages/',\n      chapters: [{\n        name: 'Real Numbers',\n        pages: '1-15'\n      }, {\n        name: 'Polynomials',\n        pages: '16-30'\n      }, {\n        name: 'Pair of Linear Equations in Two Variables',\n        pages: '31-50'\n      }, {\n        name: 'Quadratic Equations',\n        pages: '51-70'\n      }, {\n        name: 'Arithmetic Progressions',\n        pages: '71-85'\n      }, {\n        name: 'Triangles',\n        pages: '86-110'\n      }, {\n        name: 'Coordinate Geometry',\n        pages: '111-130'\n      }, {\n        name: 'Introduction to Trigonometry',\n        pages: '131-150'\n      }, {\n        name: 'Some Applications of Trigonometry',\n        pages: '151-165'\n      }, {\n        name: 'Circles',\n        pages: '166-185'\n      }, {\n        name: 'Areas Related to Circles',\n        pages: '186-200'\n      }, {\n        name: 'Surface Areas and Volumes',\n        pages: '201-225'\n      }, {\n        name: 'Statistics',\n        pages: '226-245'\n      }, {\n        name: 'Probability',\n        pages: '246-260'\n      }]\n    }]\n  };\n  useEffect(() => {\n    fetchPapers();\n  }, []);\n  useEffect(() => {\n    if (selectedPaper && selectedTextbook) {\n      calculateChapterStats();\n    }\n  }, [selectedPaper, selectedTextbook]);\n  const fetchPapers = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/uploaded-papers');\n      setPapers(response.data);\n    } catch (err) {\n      console.error('Error fetching papers:', err);\n      setMessage({\n        type: 'error',\n        text: 'Failed to load papers'\n      });\n    }\n  };\n  const handlePaperSelect = async paper => {\n    setSelectedPaper(paper);\n    setSelectedTextbook(null);\n    setSelectedChapter(null);\n    setQuestions([]);\n    setChapters([]);\n    setChapterStats([]);\n\n    // Fetch uploaded textbooks for this subject\n    try {\n      const response = await axios.get(`http://localhost:5000/api/textbooks?subject=${paper.subject}`);\n      const uploadedTextbooks = response.data || [];\n\n      // Set available textbooks based on subject (use defaults as template)\n      const availableTextbooks = defaultTextbooks[paper.subject] || [];\n\n      // Match uploaded textbooks with default templates\n      const textbooksWithFiles = availableTextbooks.map(textbook => {\n        // Find matching uploaded textbook (by subject match)\n        const uploaded = uploadedTextbooks.find(ut => ut.subject === paper.subject);\n        if (uploaded) {\n          return {\n            ...textbook,\n            uploadedFile: uploaded.file_path,\n            uploadedId: uploaded.id,\n            uploadedTitle: uploaded.title\n          };\n        }\n        return textbook;\n      });\n      setTextbooks(textbooksWithFiles);\n      if (textbooksWithFiles.length === 1) {\n        // Auto-select if only one textbook\n        handleTextbookSelect(textbooksWithFiles[0]);\n      }\n      setMessage({\n        type: 'info',\n        text: `Selected: ${paper.title}`\n      });\n    } catch (err) {\n      console.error('Error fetching textbooks:', err);\n      // Fallback to default textbooks without uploaded files\n      const availableTextbooks = defaultTextbooks[paper.subject] || [];\n      setTextbooks(availableTextbooks);\n      setMessage({\n        type: 'info',\n        text: `Selected: ${paper.title}`\n      });\n    }\n  };\n  const handleTextbookSelect = textbook => {\n    setSelectedTextbook(textbook);\n    setSelectedChapter(null);\n    setQuestions([]);\n    setChapters(textbook.chapters);\n\n    // Log textbook info for debugging\n    console.log('Selected textbook:', textbook);\n    console.log('Has uploaded file:', !!textbook.uploadedId);\n    if (textbook.uploadedId) {\n      setMessage({\n        type: 'success',\n        text: `Selected: ${textbook.name} (Uploaded file available)`\n      });\n    } else {\n      setMessage({\n        type: 'warning',\n        text: `Selected: ${textbook.name} (No uploaded file - please upload textbook PDF)`\n      });\n    }\n  };\n  const calculateChapterStats = async () => {\n    if (!selectedPaper || !selectedTextbook) return;\n    try {\n      // Fetch all questions from the selected paper\n      const response = await axios.get(`http://localhost:5000/api/parsed-questions?paper_id=${selectedPaper.id}`);\n      const allQuestions = response.data;\n\n      // Calculate question count for each chapter\n      const stats = selectedTextbook.chapters.map(chapter => {\n        const chapterQuestions = filterQuestionsByChapter(allQuestions, chapter.name);\n        return {\n          ...chapter,\n          questionCount: chapterQuestions.length\n        };\n      });\n      setChapterStats(stats);\n    } catch (err) {\n      console.error('Error calculating chapter stats:', err);\n    }\n  };\n  const handleChapterSelect = async chapterData => {\n    setSelectedChapter(chapterData);\n    setLoading(true);\n    setMessage({\n      type: '',\n      text: ''\n    });\n    try {\n      // Fetch all questions from the selected paper\n      const response = await axios.get(`http://localhost:5000/api/parsed-questions?paper_id=${selectedPaper.id}`);\n      const allQuestions = response.data;\n\n      // Filter questions by chapter using AI/keyword matching\n      const filteredQuestions = filterQuestionsByChapter(allQuestions, chapterData.name);\n      setQuestions(filteredQuestions);\n      if (filteredQuestions.length === 0) {\n        setMessage({\n          type: 'warning',\n          text: `No questions found for chapter: ${chapterData.name}`\n        });\n      } else {\n        setMessage({\n          type: 'success',\n          text: `Found ${filteredQuestions.length} questions for: ${chapterData.name}`\n        });\n      }\n    } catch (err) {\n      console.error('Error fetching questions:', err);\n      setMessage({\n        type: 'error',\n        text: 'Failed to load questions'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const estimateQuestionPageNumber = (questionText, chapterData) => {\n    // Estimate specific page range within chapter based on question content\n    const {\n      pages\n    } = chapterData;\n    const [startPage, endPage] = pages.split('-').map(p => parseInt(p.trim()));\n    const totalPages = endPage - startPage + 1;\n\n    // Define sub-topics with their relative position in chapter (0-1)\n    const subTopicPositions = {\n      // Electricity sub-topics\n      'electric current': 0.1,\n      'potential difference': 0.2,\n      'ohm law': 0.3,\n      'resistance': 0.3,\n      'series circuit': 0.5,\n      'parallel circuit': 0.6,\n      'heating effect': 0.7,\n      'electric power': 0.8,\n      'joule law': 0.9,\n      // Magnetic Effects\n      'magnetic field': 0.1,\n      'right hand rule': 0.2,\n      'electromagnet': 0.3,\n      'solenoid': 0.4,\n      'force on conductor': 0.5,\n      'electric motor': 0.6,\n      'electromagnetic induction': 0.7,\n      'generator': 0.8,\n      'fleming': 0.8,\n      // Light - Reflection and Refraction\n      'law of reflection': 0.1,\n      'plane mirror': 0.15,\n      'spherical mirror': 0.2,\n      'concave mirror': 0.3,\n      'convex mirror': 0.4,\n      'mirror formula': 0.45,\n      'refraction': 0.5,\n      'refractive index': 0.55,\n      'snell law': 0.6,\n      'lens': 0.65,\n      'concave lens': 0.7,\n      'convex lens': 0.75,\n      'lens formula': 0.8,\n      'power of lens': 0.9,\n      // Quadratic Equations\n      'standard form': 0.1,\n      'factorization': 0.2,\n      'completing square': 0.4,\n      'quadratic formula': 0.6,\n      'discriminant': 0.7,\n      'nature of roots': 0.8,\n      'word problem': 0.9,\n      // Triangles\n      'similar triangle': 0.2,\n      'basic proportionality': 0.3,\n      'criteria for similarity': 0.4,\n      'area of similar': 0.5,\n      'pythagoras theorem': 0.6,\n      'converse of pythagoras': 0.7,\n      'triangle inequality': 0.8,\n      // Coordinate Geometry\n      'distance formula': 0.2,\n      'section formula': 0.4,\n      'midpoint': 0.5,\n      'area of triangle': 0.6,\n      'collinear': 0.7,\n      'slope': 0.8,\n      // Trigonometry\n      'trigonometric ratio': 0.1,\n      'sine': 0.2,\n      'cosine': 0.3,\n      'tangent': 0.4,\n      'complementary angle': 0.5,\n      'trigonometric identity': 0.6,\n      'angle of elevation': 0.7,\n      'angle of depression': 0.8,\n      'height and distance': 0.9,\n      // Statistics\n      'mean': 0.2,\n      'median': 0.4,\n      'mode': 0.6,\n      'cumulative frequency': 0.7,\n      'ogive': 0.8,\n      // Probability\n      'theoretical probability': 0.3,\n      'experimental probability': 0.5,\n      'sample space': 0.6,\n      'mutually exclusive': 0.8,\n      // Chemistry - Acids, Bases and Salts\n      'acid': 0.1,\n      'base': 0.2,\n      'indicator': 0.3,\n      'ph scale': 0.4,\n      'neutralization': 0.5,\n      'salt': 0.6,\n      'water of crystallization': 0.8,\n      // Biology - Life Processes\n      'nutrition': 0.1,\n      'autotrophic': 0.15,\n      'heterotrophic': 0.2,\n      'photosynthesis': 0.25,\n      'digestion': 0.3,\n      'respiration': 0.5,\n      'aerobic': 0.55,\n      'anaerobic': 0.6,\n      'transportation': 0.7,\n      'excretion': 0.85\n    };\n    const lowerText = questionText.toLowerCase();\n    let estimatedPosition = 0.5; // Default to middle\n    let matchFound = false;\n\n    // Find the most specific sub-topic match\n    for (const [subTopic, position] of Object.entries(subTopicPositions)) {\n      if (lowerText.includes(subTopic)) {\n        estimatedPosition = position;\n        matchFound = true;\n        break; // Use first match (most specific)\n      }\n    }\n\n    // Calculate estimated page range (Â±2 pages from estimated position)\n    const estimatedPage = Math.round(startPage + totalPages * estimatedPosition);\n    const rangeStart = Math.max(startPage, estimatedPage - 2);\n    const rangeEnd = Math.min(endPage, estimatedPage + 2);\n    return matchFound ? `${rangeStart}-${rangeEnd}` : pages;\n  };\n  const handlePageClick = pageRange => {\n    const [startPage, endPage] = pageRange.split('-').map(p => parseInt(p.trim()));\n    setCurrentPage(startPage);\n    setTextbookPageToShow({\n      textbook: selectedTextbook,\n      chapter: selectedChapter.name,\n      pageRange: pageRange,\n      startPage: startPage,\n      endPage: endPage || startPage\n    });\n    setShowTextbookModal(true);\n  };\n  const handleNextPage = () => {\n    if (currentPage < textbookPageToShow.endPage) {\n      const nextPage = currentPage + 1;\n      console.log('Next page:', nextPage);\n      setPdfLoading(true);\n      setCurrentPage(nextPage);\n      setTimeout(() => setPdfLoading(false), 1000);\n    }\n  };\n  const handlePrevPage = () => {\n    if (currentPage > textbookPageToShow.startPage) {\n      const prevPage = currentPage - 1;\n      console.log('Previous page:', prevPage);\n      setPdfLoading(true);\n      setCurrentPage(prevPage);\n      setTimeout(() => setPdfLoading(false), 1000);\n    }\n  };\n  const handleCloseModal = () => {\n    setShowTextbookModal(false);\n    setTextbookPageToShow(null);\n    setCurrentPage(1);\n  };\n  const filterQuestionsByChapter = (questions, chapter) => {\n    // Enhanced keyword matching with scoring system for more focused results\n    const chapterKeywords = {\n      'Electricity': {\n        primary: ['current', 'voltage', 'resistance', 'ohm', 'circuit', 'electric power', 'electrical energy'],\n        secondary: ['joule', 'watt', 'ampere', 'volt', 'resistor', 'conductor', 'insulator']\n      },\n      'Magnetic Effects of Current': {\n        primary: ['magnetic field', 'electromagnet', 'solenoid', 'motor', 'generator', 'fleming'],\n        secondary: ['magnet', 'electromagnetic induction', 'armature', 'commutator']\n      },\n      'Light - Reflection and Refraction': {\n        primary: ['reflection', 'refraction', 'mirror', 'lens', 'focal length', 'image formation'],\n        secondary: ['concave', 'convex', 'ray diagram', 'optical', 'refractive index']\n      },\n      'Human Eye and Colourful World': {\n        primary: ['eye', 'retina', 'cornea', 'spectrum', 'dispersion', 'rainbow', 'prism'],\n        secondary: ['vision', 'myopia', 'hypermetropia', 'presbyopia', 'cataract']\n      },\n      'Sources of Energy': {\n        primary: ['renewable energy', 'solar energy', 'wind energy', 'fossil fuel', 'nuclear energy'],\n        secondary: ['biogas', 'hydroelectric', 'geothermal', 'tidal energy']\n      },\n      'Chemical Reactions and Equations': {\n        primary: ['chemical reaction', 'chemical equation', 'reactant', 'product', 'balanced equation'],\n        secondary: ['oxidation', 'reduction', 'decomposition', 'combination', 'displacement']\n      },\n      'Acids, Bases and Salts': {\n        primary: ['acid', 'base', 'salt', 'ph scale', 'neutralization'],\n        secondary: ['alkali', 'indicator', 'litmus', 'acidic', 'basic']\n      },\n      'Metals and Non-metals': {\n        primary: ['metal', 'non-metal', 'metalloid', 'reactivity series', 'corrosion'],\n        secondary: ['alloy', 'ore', 'extraction', 'metallic', 'ionic bond']\n      },\n      'Carbon and its Compounds': {\n        primary: ['carbon compound', 'organic compound', 'hydrocarbon', 'functional group'],\n        secondary: ['alkane', 'alkene', 'alkyne', 'alcohol', 'carboxylic acid', 'ester']\n      },\n      'Life Processes': {\n        primary: ['nutrition', 'respiration', 'transportation', 'excretion', 'photosynthesis'],\n        secondary: ['digestion', 'cellular respiration', 'transpiration', 'kidney']\n      },\n      'Control and Coordination': {\n        primary: ['nervous system', 'hormone', 'endocrine', 'reflex action', 'neuron'],\n        secondary: ['brain', 'spinal cord', 'synapse', 'receptor', 'effector']\n      },\n      'How do Organisms Reproduce': {\n        primary: ['reproduction', 'sexual reproduction', 'asexual reproduction', 'fertilization'],\n        secondary: ['gamete', 'zygote', 'fission', 'budding', 'vegetative propagation']\n      },\n      'Heredity and Evolution': {\n        primary: ['heredity', 'inheritance', 'gene', 'chromosome', 'evolution', 'natural selection'],\n        secondary: ['dna', 'darwin', 'variation', 'speciation', 'fossil']\n      },\n      'Our Environment': {\n        primary: ['ecosystem', 'food chain', 'food web', 'biodegradable', 'ozone layer'],\n        secondary: ['environment', 'pollution', 'greenhouse effect', 'decomposer']\n      },\n      'Real Numbers': {\n        primary: ['real number', 'rational number', 'irrational number', 'euclid', 'hcf', 'lcm'],\n        secondary: ['prime', 'composite', 'fundamental theorem']\n      },\n      'Polynomials': {\n        primary: ['polynomial', 'degree of polynomial', 'zero of polynomial', 'coefficient'],\n        secondary: ['quadratic polynomial', 'cubic polynomial', 'factorization']\n      },\n      'Pair of Linear Equations in Two Variables': {\n        primary: ['linear equation', 'simultaneous equation', 'substitution method', 'elimination method'],\n        secondary: ['cross multiplication', 'graphical method', 'consistent', 'inconsistent']\n      },\n      'Quadratic Equations': {\n        primary: ['quadratic equation', 'discriminant', 'roots of equation', 'quadratic formula'],\n        secondary: ['xÂ²', 'x^2', 'factorization', 'completing square']\n      },\n      'Arithmetic Progressions': {\n        primary: ['arithmetic progression', 'common difference', 'nth term', 'sum of ap'],\n        secondary: ['ap', 'arithmetic sequence', 'series']\n      },\n      'Triangles': {\n        primary: ['similar triangle', 'congruent triangle', 'pythagoras theorem', 'triangle theorem'],\n        secondary: ['area of triangle', 'perimeter', 'altitude', 'median']\n      },\n      'Coordinate Geometry': {\n        primary: ['coordinate', 'distance formula', 'section formula', 'midpoint formula'],\n        secondary: ['slope', 'x-axis', 'y-axis', 'cartesian plane']\n      },\n      'Introduction to Trigonometry': {\n        primary: ['trigonometry', 'trigonometric ratio', 'sine', 'cosine', 'tangent'],\n        secondary: ['sin', 'cos', 'tan', 'angle', 'Î¸', 'theta']\n      },\n      'Some Applications of Trigonometry': {\n        primary: ['height and distance', 'angle of elevation', 'angle of depression', 'line of sight'],\n        secondary: ['trigonometric application', 'tower', 'building height']\n      },\n      'Circles': {\n        primary: ['circle', 'tangent to circle', 'chord', 'secant', 'circle theorem'],\n        secondary: ['radius', 'diameter', 'arc', 'segment']\n      },\n      'Areas Related to Circles': {\n        primary: ['area of circle', 'sector', 'segment of circle', 'circumference'],\n        secondary: ['Ï€', 'pi', 'circular region', 'annulus']\n      },\n      'Surface Areas and Volumes': {\n        primary: ['surface area', 'volume', 'total surface area', 'curved surface area'],\n        secondary: ['cube', 'cuboid', 'cylinder', 'cone', 'sphere', 'hemisphere']\n      },\n      'Statistics': {\n        primary: ['mean', 'median', 'mode', 'frequency distribution', 'cumulative frequency'],\n        secondary: ['data', 'class interval', 'grouped data', 'ogive']\n      },\n      'Probability': {\n        primary: ['probability', 'theoretical probability', 'experimental probability', 'random experiment'],\n        secondary: ['event', 'outcome', 'sample space', 'certain', 'impossible']\n      }\n    };\n    const chapterData = chapterKeywords[chapter];\n    if (!chapterData) {\n      // Fallback to simple keyword matching\n      const keywords = chapter.toLowerCase().split(' ');\n      return questions.filter(q => {\n        const questionText = q.question_text.toLowerCase();\n        return keywords.some(keyword => questionText.includes(keyword));\n      });\n    }\n\n    // Score-based filtering for more focused results\n    return questions.filter(q => {\n      const questionText = q.question_text.toLowerCase();\n      let score = 0;\n\n      // Primary keywords are worth 3 points\n      chapterData.primary.forEach(keyword => {\n        if (questionText.includes(keyword.toLowerCase())) {\n          score += 3;\n        }\n      });\n\n      // Secondary keywords are worth 1 point\n      chapterData.secondary.forEach(keyword => {\n        if (questionText.includes(keyword.toLowerCase())) {\n          score += 1;\n        }\n      });\n\n      // Require minimum score of 2 for more focused results\n      return score >= 2;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chapter-questions\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chapter-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCD6 Questions by Chapter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select a question paper, textbook, and chapter to view related questions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 7\n    }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${message.type}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chapter-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paper-selection\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCC4 Select Question Paper\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"papers-list\",\n          children: papers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-data\",\n            children: \"No question papers uploaded yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this) : papers.map(paper => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `paper-card ${(selectedPaper === null || selectedPaper === void 0 ? void 0 : selectedPaper.id) === paper.id ? 'selected' : ''}`,\n            onClick: () => handlePaperSelect(paper),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paper-icon\",\n              children: \"\\uD83D\\uDCDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paper-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: paper.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"paper-subject\",\n                children: paper.subject\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"paper-date\",\n                children: new Date(paper.uploaded_at).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 19\n            }, this), (selectedPaper === null || selectedPaper === void 0 ? void 0 : selectedPaper.id) === paper.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-badge\",\n              children: \"\\u2713\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 21\n            }, this)]\n          }, paper.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this), selectedPaper && textbooks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textbook-selection\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCDA Select Textbook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"textbooks-list\",\n          children: textbooks.map((textbook, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `textbook-card ${(selectedTextbook === null || selectedTextbook === void 0 ? void 0 : selectedTextbook.name) === textbook.name ? 'selected' : ''} ${!textbook.uploadedId ? 'no-file' : ''}`,\n            onClick: () => handleTextbookSelect(textbook),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"textbook-icon\",\n              children: textbook.uploadedId ? 'ðŸ“•' : 'ðŸ“˜'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"textbook-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: textbook.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [textbook.chapters.length, \" Chapters\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 21\n              }, this), textbook.uploadedId ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"file-status uploaded\",\n                children: \"\\u2713 File Uploaded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"file-status not-uploaded\",\n                children: \"\\u26A0 No File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 19\n            }, this), (selectedTextbook === null || selectedTextbook === void 0 ? void 0 : selectedTextbook.name) === textbook.name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-badge\",\n              children: \"\\u2713\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 11\n      }, this), selectedTextbook && chapterStats.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chapter-table-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDCCB Chapters from \", selectedTextbook.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chapter-table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"chapter-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Chapter Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Pages\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 667,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Questions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Action\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: chapterStats.map((chapter, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: (selectedChapter === null || selectedChapter === void 0 ? void 0 : selectedChapter.name) === chapter.name ? 'selected-row' : '',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"chapter-num\",\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"chapter-name-cell\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: chapter.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"pages-cell\",\n                  children: chapter.pages\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 682,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"count-cell\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `question-count ${chapter.questionCount > 0 ? 'has-questions' : 'no-questions'}`,\n                    children: chapter.questionCount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 684,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"action-cell\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"view-btn\",\n                    onClick: () => handleChapterSelect(chapter),\n                    disabled: chapter.questionCount === 0,\n                    children: chapter.questionCount > 0 ? 'View Questions' : 'No Questions'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 689,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 688,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-summary\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Total Chapters:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 17\n            }, this), \" \", chapterStats.length, \" |\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \" Total Questions:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 17\n            }, this), \" \", chapterStats.reduce((sum, ch) => sum + ch.questionCount, 0)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 11\n      }, this), selectedChapter && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"questions-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"questions-header-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"\\u2753 Questions from: \", selectedChapter.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chapter-meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"meta-item\",\n              children: [\"\\uD83D\\uDCD6 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Textbook:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 717,\n                columnNumber: 48\n              }, this), \" \", selectedTextbook.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"meta-item\",\n              children: [\"\\uD83D\\uDCC4 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Pages:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 48\n              }, this), \" \", selectedChapter.pages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"meta-item\",\n              children: [\"\\uD83D\\uDCDD \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Paper:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 719,\n                columnNumber: 48\n              }, this), \" \", selectedPaper.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 13\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading questions...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 15\n        }, this) : questions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-questions\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No questions found for this chapter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Try selecting a different chapter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"questions-list\",\n          children: questions.map((q, index) => {\n            const estimatedPages = estimateQuestionPageNumber(q.question_text, selectedChapter);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"question-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"question-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"question-number\",\n                  children: [\"Q\", q.question_number]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 740,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chapter-page-badge clickable\",\n                  onClick: () => handlePageClick(estimatedPages),\n                  title: \"Click to view textbook pages\",\n                  children: [\"\\uD83D\\uDCD6 Pages: \", estimatedPages]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 23\n                }, this), q.question_type && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `question-type ${q.question_type}`,\n                  children: q.question_type.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 25\n                }, this), q.marks && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"question-marks\",\n                  children: [q.marks, \" marks\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 754,\n                  columnNumber: 25\n                }, this), q.has_math && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"math-badge\",\n                  children: \"\\uD83D\\uDCD0 Math\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 25\n                }, this), q.has_diagram && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"diagram-badge\",\n                  children: \"\\uD83D\\uDCCA Diagram\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"question-text\",\n                children: q.question_text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 21\n              }, this), (() => {\n                // Parse sub_parts if it's a string\n                let subParts = q.sub_parts;\n                if (typeof subParts === 'string') {\n                  try {\n                    subParts = JSON.parse(subParts);\n                  } catch (e) {\n                    subParts = [];\n                  }\n                }\n                return subParts && Array.isArray(subParts) && subParts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"sub-parts\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Sub-parts:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 778,\n                    columnNumber: 27\n                  }, this), \" \", subParts.join(', ')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 777,\n                  columnNumber: 25\n                }, this);\n              })()]\n            }, q.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 7\n    }, this), showTextbookModal && textbookPageToShow && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"textbook-modal-overlay\",\n      onClick: handleCloseModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textbook-modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"textbook-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-title-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"\\uD83D\\uDCD6 \", textbookPageToShow.textbook.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 797,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"modal-subtitle\",\n              children: [\"Chapter: \", textbookPageToShow.chapter, \" | Pages: \", textbookPageToShow.pageRange]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close-btn\",\n            onClick: handleCloseModal,\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"textbook-modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"viewer-type-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `viewer-type-btn ${viewerType === 'external' ? 'active' : ''}`,\n              onClick: () => setViewerType('external'),\n              children: \"\\uD83D\\uDCD6 PDF Viewer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `viewer-type-btn ${viewerType === 'image' ? 'active' : ''}`,\n              onClick: () => setViewerType('image'),\n              children: \"\\uD83D\\uDDBC\\uFE0F Page Images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"textbook-viewer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"page-info\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"current-page-indicator\",\n                children: [\"\\uD83D\\uDCC4 Page \", currentPage, \" of \", textbookPageToShow.pageRange]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 829,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 17\n            }, this), viewerType === 'external' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"external-link-viewer pdf-viewer-mode\",\n              children: textbookPageToShow.textbook.uploadedFile ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pdf-embed-container\",\n                  children: [pdfLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"pdf-loading-overlay\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 842,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Loading page \", currentPage, \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 843,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 841,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n                    src: `http://localhost:5000/api/textbook-pdf/${textbookPageToShow.textbook.uploadedId}#page=${currentPage}&zoom=page-fit`,\n                    title: `Textbook Page ${currentPage}`,\n                    className: \"textbook-pdf-iframe\",\n                    frameBorder: \"0\",\n                    allow: \"fullscreen\",\n                    onLoad: () => setPdfLoading(false)\n                  }, `pdf-${currentPage}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 846,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 839,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pdf-viewer-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"\\uD83D\\uDCA1 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Tip:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 857,\n                      columnNumber: 33\n                    }, this), \" Use the PDF's built-in navigation or the buttons below to change pages\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 857,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"external-icon\",\n                  children: \"\\uD83D\\uDCDA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 862,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"No Textbook Uploaded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 863,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"viewer-description\",\n                  children: [\"Please upload a textbook file for \", textbookPageToShow.textbook.name, \" to view pages.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 864,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"link-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Textbook:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 868,\n                      columnNumber: 30\n                    }, this), \" \", textbookPageToShow.textbook.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Chapter:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 869,\n                      columnNumber: 30\n                    }, this), \" \", textbookPageToShow.chapter]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 869,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Pages:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 870,\n                      columnNumber: 30\n                    }, this), \" \", textbookPageToShow.pageRange]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 870,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"upload-hint\",\n                    children: \"Go to \\\"Upload Papers\\\" menu to upload textbook PDFs\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 871,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 867,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 19\n            }, this), viewerType === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-viewer\",\n              children: textbookPageToShow.textbook.uploadedId ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `http://localhost:5000/api/textbook-page-image/${textbookPageToShow.textbook.uploadedId}/${currentPage}`,\n                  alt: `Page ${currentPage}`,\n                  className: \"textbook-page-image\",\n                  onError: e => {\n                    e.target.style.display = 'none';\n                    e.target.nextSibling.style.display = 'flex';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 883,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"image-error\",\n                  style: {\n                    display: 'none'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"error-icon\",\n                    children: \"\\uD83D\\uDDBC\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 893,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Page image not available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 894,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"error-hint\",\n                    children: \"Page images are generated from the uploaded PDF. If you're seeing this, the image conversion may not be set up yet.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 895,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"error-hint\",\n                    children: \"Switch to PDF Viewer to see the content.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 899,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-error\",\n                style: {\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"error-icon\",\n                  children: \"\\uD83D\\uDDBC\\uFE0F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 904,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"No textbook uploaded\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 905,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"error-hint\",\n                  children: \"Please upload a textbook PDF first to view page images.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 906,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"page-navigation\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"nav-btn\",\n                onClick: handlePrevPage,\n                disabled: currentPage <= textbookPageToShow.startPage,\n                children: \"\\u2190 Previous\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"page-display\",\n                children: [\"Page \", currentPage]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 923,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"nav-btn\",\n                onClick: handleNextPage,\n                disabled: currentPage >= textbookPageToShow.endPage,\n                children: \"Next \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 915,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 827,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"textbook-modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"footer-info\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"page-count\",\n              children: [textbookPageToShow.endPage - textbookPageToShow.startPage + 1, \" pages in range\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 939,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 938,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-modal-btn\",\n            onClick: handleCloseModal,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 943,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 937,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 794,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 793,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 582,\n    columnNumber: 5\n  }, this);\n};\n_s(ChapterQuestions, \"zJ/4UhZmvBrb+FlRmUMJtRLu8sY=\");\n_c = ChapterQuestions;\nexport default ChapterQuestions;\nvar _c;\n$RefreshReg$(_c, \"ChapterQuestions\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","ChapterQuestions","_s","papers","setPapers","textbooks","setTextbooks","selectedPaper","setSelectedPaper","selectedTextbook","setSelectedTextbook","chapters","setChapters","chapterStats","setChapterStats","selectedChapter","setSelectedChapter","questions","setQuestions","loading","setLoading","message","setMessage","type","text","showTextbookModal","setShowTextbookModal","textbookPageToShow","setTextbookPageToShow","currentPage","setCurrentPage","viewerType","setViewerType","pdfLoading","setPdfLoading","defaultTextbooks","name","pdfUrl","externalUrl","imageBasePath","pages","fetchPapers","calculateChapterStats","response","get","data","err","console","error","handlePaperSelect","paper","subject","uploadedTextbooks","availableTextbooks","textbooksWithFiles","map","textbook","uploaded","find","ut","uploadedFile","file_path","uploadedId","id","uploadedTitle","title","length","handleTextbookSelect","log","allQuestions","stats","chapter","chapterQuestions","filterQuestionsByChapter","questionCount","handleChapterSelect","chapterData","filteredQuestions","estimateQuestionPageNumber","questionText","startPage","endPage","split","p","parseInt","trim","totalPages","subTopicPositions","lowerText","toLowerCase","estimatedPosition","matchFound","subTopic","position","Object","entries","includes","estimatedPage","Math","round","rangeStart","max","rangeEnd","min","handlePageClick","pageRange","handleNextPage","nextPage","setTimeout","handlePrevPage","prevPage","handleCloseModal","chapterKeywords","primary","secondary","keywords","filter","q","question_text","some","keyword","score","forEach","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","Date","uploaded_at","toLocaleDateString","index","disabled","reduce","sum","ch","estimatedPages","question_number","question_type","toUpperCase","marks","has_math","has_diagram","subParts","sub_parts","JSON","parse","e","Array","isArray","join","stopPropagation","src","frameBorder","allow","onLoad","alt","onError","target","style","display","nextSibling","_c","$RefreshReg$"],"sources":["D:/AI/_Programs/CBSE/aqnamic/frontend/src/components/ChapterQuestions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './ChapterQuestions.css';\n\nconst ChapterQuestions = () => {\n  const [papers, setPapers] = useState([]);\n  const [textbooks, setTextbooks] = useState([]);\n  const [selectedPaper, setSelectedPaper] = useState(null);\n  const [selectedTextbook, setSelectedTextbook] = useState(null);\n  const [chapters, setChapters] = useState([]);\n  const [chapterStats, setChapterStats] = useState([]);\n  const [selectedChapter, setSelectedChapter] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({ type: '', text: '' });\n  const [showTextbookModal, setShowTextbookModal] = useState(false);\n  const [textbookPageToShow, setTextbookPageToShow] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [viewerType, setViewerType] = useState('external'); // 'pdf', 'image', 'external', 'embedded'\n  const [pdfLoading, setPdfLoading] = useState(false);\n\n  // Predefined textbooks with chapters and page numbers\n  const defaultTextbooks = {\n    'Physics': [\n      {\n        name: 'NCERT Physics Class 10',\n        pdfUrl: 'https://ncert.nic.in/textbook/pdf/keph101.pdf',\n        externalUrl: 'https://ncert.nic.in/textbook.php?keph1=0-8',\n        imageBasePath: '/textbooks/physics-class10/pages/',\n        chapters: [\n          { name: 'Electricity', pages: '1-20' },\n          { name: 'Magnetic Effects of Current', pages: '21-40' },\n          { name: 'Light - Reflection and Refraction', pages: '41-65' },\n          { name: 'Human Eye and Colourful World', pages: '66-85' },\n          { name: 'Sources of Energy', pages: '86-105' }\n        ]\n      }\n    ],\n    'Chemistry': [\n      {\n        name: 'NCERT Chemistry Class 10',\n        pdfUrl: 'https://ncert.nic.in/textbook/pdf/kesc101.pdf',\n        externalUrl: 'https://ncert.nic.in/textbook.php?kesc1=0-8',\n        imageBasePath: '/textbooks/chemistry-class10/pages/',\n        chapters: [\n          { name: 'Chemical Reactions and Equations', pages: '1-18' },\n          { name: 'Acids, Bases and Salts', pages: '19-35' },\n          { name: 'Metals and Non-metals', pages: '36-55' },\n          { name: 'Carbon and its Compounds', pages: '56-80' },\n          { name: 'Periodic Classification of Elements', pages: '81-95' }\n        ]\n      }\n    ],\n    'Biology': [\n      {\n        name: 'NCERT Biology Class 10',\n        pdfUrl: 'https://ncert.nic.in/textbook/pdf/kebo101.pdf',\n        externalUrl: 'https://ncert.nic.in/textbook.php?kebo1=0-8',\n        imageBasePath: '/textbooks/biology-class10/pages/',\n        chapters: [\n          { name: 'Life Processes', pages: '1-25' },\n          { name: 'Control and Coordination', pages: '26-45' },\n          { name: 'How do Organisms Reproduce', pages: '46-70' },\n          { name: 'Heredity and Evolution', pages: '71-90' },\n          { name: 'Our Environment', pages: '91-110' }\n        ]\n      }\n    ],\n    'Mathematics': [\n      {\n        name: 'NCERT Mathematics Class 10',\n        pdfUrl: 'https://ncert.nic.in/textbook/pdf/kemh101.pdf',\n        externalUrl: 'https://ncert.nic.in/textbook.php?kemh1=0-16',\n        imageBasePath: '/textbooks/mathematics-class10/pages/',\n        chapters: [\n          { name: 'Real Numbers', pages: '1-15' },\n          { name: 'Polynomials', pages: '16-30' },\n          { name: 'Pair of Linear Equations in Two Variables', pages: '31-50' },\n          { name: 'Quadratic Equations', pages: '51-70' },\n          { name: 'Arithmetic Progressions', pages: '71-85' },\n          { name: 'Triangles', pages: '86-110' },\n          { name: 'Coordinate Geometry', pages: '111-130' },\n          { name: 'Introduction to Trigonometry', pages: '131-150' },\n          { name: 'Some Applications of Trigonometry', pages: '151-165' },\n          { name: 'Circles', pages: '166-185' },\n          { name: 'Areas Related to Circles', pages: '186-200' },\n          { name: 'Surface Areas and Volumes', pages: '201-225' },\n          { name: 'Statistics', pages: '226-245' },\n          { name: 'Probability', pages: '246-260' }\n        ]\n      }\n    ]\n  };\n\n  useEffect(() => {\n    fetchPapers();\n  }, []);\n\n  useEffect(() => {\n    if (selectedPaper && selectedTextbook) {\n      calculateChapterStats();\n    }\n  }, [selectedPaper, selectedTextbook]);\n\n  const fetchPapers = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/uploaded-papers');\n      setPapers(response.data);\n    } catch (err) {\n      console.error('Error fetching papers:', err);\n      setMessage({ type: 'error', text: 'Failed to load papers' });\n    }\n  };\n\n  const handlePaperSelect = async (paper) => {\n    setSelectedPaper(paper);\n    setSelectedTextbook(null);\n    setSelectedChapter(null);\n    setQuestions([]);\n    setChapters([]);\n    setChapterStats([]);\n    \n    // Fetch uploaded textbooks for this subject\n    try {\n      const response = await axios.get(`http://localhost:5000/api/textbooks?subject=${paper.subject}`);\n      const uploadedTextbooks = response.data || [];\n      \n      // Set available textbooks based on subject (use defaults as template)\n      const availableTextbooks = defaultTextbooks[paper.subject] || [];\n      \n      // Match uploaded textbooks with default templates\n      const textbooksWithFiles = availableTextbooks.map(textbook => {\n        // Find matching uploaded textbook (by subject match)\n        const uploaded = uploadedTextbooks.find(ut => \n          ut.subject === paper.subject\n        );\n        \n        if (uploaded) {\n          return {\n            ...textbook,\n            uploadedFile: uploaded.file_path,\n            uploadedId: uploaded.id,\n            uploadedTitle: uploaded.title\n          };\n        }\n        return textbook;\n      });\n      \n      setTextbooks(textbooksWithFiles);\n      \n      if (textbooksWithFiles.length === 1) {\n        // Auto-select if only one textbook\n        handleTextbookSelect(textbooksWithFiles[0]);\n      }\n      \n      setMessage({ type: 'info', text: `Selected: ${paper.title}` });\n    } catch (err) {\n      console.error('Error fetching textbooks:', err);\n      // Fallback to default textbooks without uploaded files\n      const availableTextbooks = defaultTextbooks[paper.subject] || [];\n      setTextbooks(availableTextbooks);\n      setMessage({ type: 'info', text: `Selected: ${paper.title}` });\n    }\n  };\n\n  const handleTextbookSelect = (textbook) => {\n    setSelectedTextbook(textbook);\n    setSelectedChapter(null);\n    setQuestions([]);\n    setChapters(textbook.chapters);\n    \n    // Log textbook info for debugging\n    console.log('Selected textbook:', textbook);\n    console.log('Has uploaded file:', !!textbook.uploadedId);\n    \n    if (textbook.uploadedId) {\n      setMessage({ \n        type: 'success', \n        text: `Selected: ${textbook.name} (Uploaded file available)` \n      });\n    } else {\n      setMessage({ \n        type: 'warning', \n        text: `Selected: ${textbook.name} (No uploaded file - please upload textbook PDF)` \n      });\n    }\n  };\n\n  const calculateChapterStats = async () => {\n    if (!selectedPaper || !selectedTextbook) return;\n\n    try {\n      // Fetch all questions from the selected paper\n      const response = await axios.get(\n        `http://localhost:5000/api/parsed-questions?paper_id=${selectedPaper.id}`\n      );\n      \n      const allQuestions = response.data;\n      \n      // Calculate question count for each chapter\n      const stats = selectedTextbook.chapters.map(chapter => {\n        const chapterQuestions = filterQuestionsByChapter(allQuestions, chapter.name);\n        return {\n          ...chapter,\n          questionCount: chapterQuestions.length\n        };\n      });\n      \n      setChapterStats(stats);\n    } catch (err) {\n      console.error('Error calculating chapter stats:', err);\n    }\n  };\n\n  const handleChapterSelect = async (chapterData) => {\n    setSelectedChapter(chapterData);\n    setLoading(true);\n    setMessage({ type: '', text: '' });\n\n    try {\n      // Fetch all questions from the selected paper\n      const response = await axios.get(\n        `http://localhost:5000/api/parsed-questions?paper_id=${selectedPaper.id}`\n      );\n      \n      const allQuestions = response.data;\n      \n      // Filter questions by chapter using AI/keyword matching\n      const filteredQuestions = filterQuestionsByChapter(allQuestions, chapterData.name);\n      \n      setQuestions(filteredQuestions);\n      \n      if (filteredQuestions.length === 0) {\n        setMessage({ \n          type: 'warning', \n          text: `No questions found for chapter: ${chapterData.name}` \n        });\n      } else {\n        setMessage({ \n          type: 'success', \n          text: `Found ${filteredQuestions.length} questions for: ${chapterData.name}` \n        });\n      }\n    } catch (err) {\n      console.error('Error fetching questions:', err);\n      setMessage({ type: 'error', text: 'Failed to load questions' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const estimateQuestionPageNumber = (questionText, chapterData) => {\n    // Estimate specific page range within chapter based on question content\n    const { pages } = chapterData;\n    const [startPage, endPage] = pages.split('-').map(p => parseInt(p.trim()));\n    const totalPages = endPage - startPage + 1;\n    \n    // Define sub-topics with their relative position in chapter (0-1)\n    const subTopicPositions = {\n      // Electricity sub-topics\n      'electric current': 0.1,\n      'potential difference': 0.2,\n      'ohm law': 0.3,\n      'resistance': 0.3,\n      'series circuit': 0.5,\n      'parallel circuit': 0.6,\n      'heating effect': 0.7,\n      'electric power': 0.8,\n      'joule law': 0.9,\n      \n      // Magnetic Effects\n      'magnetic field': 0.1,\n      'right hand rule': 0.2,\n      'electromagnet': 0.3,\n      'solenoid': 0.4,\n      'force on conductor': 0.5,\n      'electric motor': 0.6,\n      'electromagnetic induction': 0.7,\n      'generator': 0.8,\n      'fleming': 0.8,\n      \n      // Light - Reflection and Refraction\n      'law of reflection': 0.1,\n      'plane mirror': 0.15,\n      'spherical mirror': 0.2,\n      'concave mirror': 0.3,\n      'convex mirror': 0.4,\n      'mirror formula': 0.45,\n      'refraction': 0.5,\n      'refractive index': 0.55,\n      'snell law': 0.6,\n      'lens': 0.65,\n      'concave lens': 0.7,\n      'convex lens': 0.75,\n      'lens formula': 0.8,\n      'power of lens': 0.9,\n      \n      // Quadratic Equations\n      'standard form': 0.1,\n      'factorization': 0.2,\n      'completing square': 0.4,\n      'quadratic formula': 0.6,\n      'discriminant': 0.7,\n      'nature of roots': 0.8,\n      'word problem': 0.9,\n      \n      // Triangles\n      'similar triangle': 0.2,\n      'basic proportionality': 0.3,\n      'criteria for similarity': 0.4,\n      'area of similar': 0.5,\n      'pythagoras theorem': 0.6,\n      'converse of pythagoras': 0.7,\n      'triangle inequality': 0.8,\n      \n      // Coordinate Geometry\n      'distance formula': 0.2,\n      'section formula': 0.4,\n      'midpoint': 0.5,\n      'area of triangle': 0.6,\n      'collinear': 0.7,\n      'slope': 0.8,\n      \n      // Trigonometry\n      'trigonometric ratio': 0.1,\n      'sine': 0.2,\n      'cosine': 0.3,\n      'tangent': 0.4,\n      'complementary angle': 0.5,\n      'trigonometric identity': 0.6,\n      'angle of elevation': 0.7,\n      'angle of depression': 0.8,\n      'height and distance': 0.9,\n      \n      // Statistics\n      'mean': 0.2,\n      'median': 0.4,\n      'mode': 0.6,\n      'cumulative frequency': 0.7,\n      'ogive': 0.8,\n      \n      // Probability\n      'theoretical probability': 0.3,\n      'experimental probability': 0.5,\n      'sample space': 0.6,\n      'mutually exclusive': 0.8,\n      \n      // Chemistry - Acids, Bases and Salts\n      'acid': 0.1,\n      'base': 0.2,\n      'indicator': 0.3,\n      'ph scale': 0.4,\n      'neutralization': 0.5,\n      'salt': 0.6,\n      'water of crystallization': 0.8,\n      \n      // Biology - Life Processes\n      'nutrition': 0.1,\n      'autotrophic': 0.15,\n      'heterotrophic': 0.2,\n      'photosynthesis': 0.25,\n      'digestion': 0.3,\n      'respiration': 0.5,\n      'aerobic': 0.55,\n      'anaerobic': 0.6,\n      'transportation': 0.7,\n      'excretion': 0.85\n    };\n    \n    const lowerText = questionText.toLowerCase();\n    let estimatedPosition = 0.5; // Default to middle\n    let matchFound = false;\n    \n    // Find the most specific sub-topic match\n    for (const [subTopic, position] of Object.entries(subTopicPositions)) {\n      if (lowerText.includes(subTopic)) {\n        estimatedPosition = position;\n        matchFound = true;\n        break; // Use first match (most specific)\n      }\n    }\n    \n    // Calculate estimated page range (Â±2 pages from estimated position)\n    const estimatedPage = Math.round(startPage + (totalPages * estimatedPosition));\n    const rangeStart = Math.max(startPage, estimatedPage - 2);\n    const rangeEnd = Math.min(endPage, estimatedPage + 2);\n    \n    return matchFound ? `${rangeStart}-${rangeEnd}` : pages;\n  };\n\n  const handlePageClick = (pageRange) => {\n    const [startPage, endPage] = pageRange.split('-').map(p => parseInt(p.trim()));\n    setCurrentPage(startPage);\n    setTextbookPageToShow({\n      textbook: selectedTextbook,\n      chapter: selectedChapter.name,\n      pageRange: pageRange,\n      startPage: startPage,\n      endPage: endPage || startPage\n    });\n    setShowTextbookModal(true);\n  };\n\n  const handleNextPage = () => {\n    if (currentPage < textbookPageToShow.endPage) {\n      const nextPage = currentPage + 1;\n      console.log('Next page:', nextPage);\n      setPdfLoading(true);\n      setCurrentPage(nextPage);\n      setTimeout(() => setPdfLoading(false), 1000);\n    }\n  };\n\n  const handlePrevPage = () => {\n    if (currentPage > textbookPageToShow.startPage) {\n      const prevPage = currentPage - 1;\n      console.log('Previous page:', prevPage);\n      setPdfLoading(true);\n      setCurrentPage(prevPage);\n      setTimeout(() => setPdfLoading(false), 1000);\n    }\n  };\n\n  const handleCloseModal = () => {\n    setShowTextbookModal(false);\n    setTextbookPageToShow(null);\n    setCurrentPage(1);\n  };\n\n  const filterQuestionsByChapter = (questions, chapter) => {\n    // Enhanced keyword matching with scoring system for more focused results\n    const chapterKeywords = {\n      'Electricity': {\n        primary: ['current', 'voltage', 'resistance', 'ohm', 'circuit', 'electric power', 'electrical energy'],\n        secondary: ['joule', 'watt', 'ampere', 'volt', 'resistor', 'conductor', 'insulator']\n      },\n      'Magnetic Effects of Current': {\n        primary: ['magnetic field', 'electromagnet', 'solenoid', 'motor', 'generator', 'fleming'],\n        secondary: ['magnet', 'electromagnetic induction', 'armature', 'commutator']\n      },\n      'Light - Reflection and Refraction': {\n        primary: ['reflection', 'refraction', 'mirror', 'lens', 'focal length', 'image formation'],\n        secondary: ['concave', 'convex', 'ray diagram', 'optical', 'refractive index']\n      },\n      'Human Eye and Colourful World': {\n        primary: ['eye', 'retina', 'cornea', 'spectrum', 'dispersion', 'rainbow', 'prism'],\n        secondary: ['vision', 'myopia', 'hypermetropia', 'presbyopia', 'cataract']\n      },\n      'Sources of Energy': {\n        primary: ['renewable energy', 'solar energy', 'wind energy', 'fossil fuel', 'nuclear energy'],\n        secondary: ['biogas', 'hydroelectric', 'geothermal', 'tidal energy']\n      },\n      'Chemical Reactions and Equations': {\n        primary: ['chemical reaction', 'chemical equation', 'reactant', 'product', 'balanced equation'],\n        secondary: ['oxidation', 'reduction', 'decomposition', 'combination', 'displacement']\n      },\n      'Acids, Bases and Salts': {\n        primary: ['acid', 'base', 'salt', 'ph scale', 'neutralization'],\n        secondary: ['alkali', 'indicator', 'litmus', 'acidic', 'basic']\n      },\n      'Metals and Non-metals': {\n        primary: ['metal', 'non-metal', 'metalloid', 'reactivity series', 'corrosion'],\n        secondary: ['alloy', 'ore', 'extraction', 'metallic', 'ionic bond']\n      },\n      'Carbon and its Compounds': {\n        primary: ['carbon compound', 'organic compound', 'hydrocarbon', 'functional group'],\n        secondary: ['alkane', 'alkene', 'alkyne', 'alcohol', 'carboxylic acid', 'ester']\n      },\n      'Life Processes': {\n        primary: ['nutrition', 'respiration', 'transportation', 'excretion', 'photosynthesis'],\n        secondary: ['digestion', 'cellular respiration', 'transpiration', 'kidney']\n      },\n      'Control and Coordination': {\n        primary: ['nervous system', 'hormone', 'endocrine', 'reflex action', 'neuron'],\n        secondary: ['brain', 'spinal cord', 'synapse', 'receptor', 'effector']\n      },\n      'How do Organisms Reproduce': {\n        primary: ['reproduction', 'sexual reproduction', 'asexual reproduction', 'fertilization'],\n        secondary: ['gamete', 'zygote', 'fission', 'budding', 'vegetative propagation']\n      },\n      'Heredity and Evolution': {\n        primary: ['heredity', 'inheritance', 'gene', 'chromosome', 'evolution', 'natural selection'],\n        secondary: ['dna', 'darwin', 'variation', 'speciation', 'fossil']\n      },\n      'Our Environment': {\n        primary: ['ecosystem', 'food chain', 'food web', 'biodegradable', 'ozone layer'],\n        secondary: ['environment', 'pollution', 'greenhouse effect', 'decomposer']\n      },\n      'Real Numbers': {\n        primary: ['real number', 'rational number', 'irrational number', 'euclid', 'hcf', 'lcm'],\n        secondary: ['prime', 'composite', 'fundamental theorem']\n      },\n      'Polynomials': {\n        primary: ['polynomial', 'degree of polynomial', 'zero of polynomial', 'coefficient'],\n        secondary: ['quadratic polynomial', 'cubic polynomial', 'factorization']\n      },\n      'Pair of Linear Equations in Two Variables': {\n        primary: ['linear equation', 'simultaneous equation', 'substitution method', 'elimination method'],\n        secondary: ['cross multiplication', 'graphical method', 'consistent', 'inconsistent']\n      },\n      'Quadratic Equations': {\n        primary: ['quadratic equation', 'discriminant', 'roots of equation', 'quadratic formula'],\n        secondary: ['xÂ²', 'x^2', 'factorization', 'completing square']\n      },\n      'Arithmetic Progressions': {\n        primary: ['arithmetic progression', 'common difference', 'nth term', 'sum of ap'],\n        secondary: ['ap', 'arithmetic sequence', 'series']\n      },\n      'Triangles': {\n        primary: ['similar triangle', 'congruent triangle', 'pythagoras theorem', 'triangle theorem'],\n        secondary: ['area of triangle', 'perimeter', 'altitude', 'median']\n      },\n      'Coordinate Geometry': {\n        primary: ['coordinate', 'distance formula', 'section formula', 'midpoint formula'],\n        secondary: ['slope', 'x-axis', 'y-axis', 'cartesian plane']\n      },\n      'Introduction to Trigonometry': {\n        primary: ['trigonometry', 'trigonometric ratio', 'sine', 'cosine', 'tangent'],\n        secondary: ['sin', 'cos', 'tan', 'angle', 'Î¸', 'theta']\n      },\n      'Some Applications of Trigonometry': {\n        primary: ['height and distance', 'angle of elevation', 'angle of depression', 'line of sight'],\n        secondary: ['trigonometric application', 'tower', 'building height']\n      },\n      'Circles': {\n        primary: ['circle', 'tangent to circle', 'chord', 'secant', 'circle theorem'],\n        secondary: ['radius', 'diameter', 'arc', 'segment']\n      },\n      'Areas Related to Circles': {\n        primary: ['area of circle', 'sector', 'segment of circle', 'circumference'],\n        secondary: ['Ï€', 'pi', 'circular region', 'annulus']\n      },\n      'Surface Areas and Volumes': {\n        primary: ['surface area', 'volume', 'total surface area', 'curved surface area'],\n        secondary: ['cube', 'cuboid', 'cylinder', 'cone', 'sphere', 'hemisphere']\n      },\n      'Statistics': {\n        primary: ['mean', 'median', 'mode', 'frequency distribution', 'cumulative frequency'],\n        secondary: ['data', 'class interval', 'grouped data', 'ogive']\n      },\n      'Probability': {\n        primary: ['probability', 'theoretical probability', 'experimental probability', 'random experiment'],\n        secondary: ['event', 'outcome', 'sample space', 'certain', 'impossible']\n      }\n    };\n\n    const chapterData = chapterKeywords[chapter];\n    if (!chapterData) {\n      // Fallback to simple keyword matching\n      const keywords = chapter.toLowerCase().split(' ');\n      return questions.filter(q => {\n        const questionText = q.question_text.toLowerCase();\n        return keywords.some(keyword => questionText.includes(keyword));\n      });\n    }\n\n    // Score-based filtering for more focused results\n    return questions.filter(q => {\n      const questionText = q.question_text.toLowerCase();\n      let score = 0;\n\n      // Primary keywords are worth 3 points\n      chapterData.primary.forEach(keyword => {\n        if (questionText.includes(keyword.toLowerCase())) {\n          score += 3;\n        }\n      });\n\n      // Secondary keywords are worth 1 point\n      chapterData.secondary.forEach(keyword => {\n        if (questionText.includes(keyword.toLowerCase())) {\n          score += 1;\n        }\n      });\n\n      // Require minimum score of 2 for more focused results\n      return score >= 2;\n    });\n  };\n\n  return (\n    <div className=\"chapter-questions\">\n      <div className=\"chapter-header\">\n        <h2>ðŸ“– Questions by Chapter</h2>\n        <p>Select a question paper, textbook, and chapter to view related questions</p>\n      </div>\n\n      {message.text && (\n        <div className={`message ${message.type}`}>\n          {message.text}\n        </div>\n      )}\n\n      <div className=\"chapter-content\">\n        {/* Paper Selection */}\n        <div className=\"paper-selection\">\n          <h3>ðŸ“„ Select Question Paper</h3>\n          <div className=\"papers-list\">\n            {papers.length === 0 ? (\n              <p className=\"no-data\">No question papers uploaded yet</p>\n            ) : (\n              papers.map(paper => (\n                <div\n                  key={paper.id}\n                  className={`paper-card ${selectedPaper?.id === paper.id ? 'selected' : ''}`}\n                  onClick={() => handlePaperSelect(paper)}\n                >\n                  <div className=\"paper-icon\">ðŸ“</div>\n                  <div className=\"paper-info\">\n                    <h4>{paper.title}</h4>\n                    <p className=\"paper-subject\">{paper.subject}</p>\n                    <p className=\"paper-date\">\n                      {new Date(paper.uploaded_at).toLocaleDateString()}\n                    </p>\n                  </div>\n                  {selectedPaper?.id === paper.id && (\n                    <div className=\"selected-badge\">âœ“</div>\n                  )}\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Textbook Selection */}\n        {selectedPaper && textbooks.length > 0 && (\n          <div className=\"textbook-selection\">\n            <h3>ðŸ“š Select Textbook</h3>\n            <div className=\"textbooks-list\">\n              {textbooks.map((textbook, index) => (\n                <div\n                  key={index}\n                  className={`textbook-card ${selectedTextbook?.name === textbook.name ? 'selected' : ''} ${!textbook.uploadedId ? 'no-file' : ''}`}\n                  onClick={() => handleTextbookSelect(textbook)}\n                >\n                  <div className=\"textbook-icon\">\n                    {textbook.uploadedId ? 'ðŸ“•' : 'ðŸ“˜'}\n                  </div>\n                  <div className=\"textbook-info\">\n                    <h4>{textbook.name}</h4>\n                    <p>{textbook.chapters.length} Chapters</p>\n                    {textbook.uploadedId ? (\n                      <span className=\"file-status uploaded\">âœ“ File Uploaded</span>\n                    ) : (\n                      <span className=\"file-status not-uploaded\">âš  No File</span>\n                    )}\n                  </div>\n                  {selectedTextbook?.name === textbook.name && (\n                    <div className=\"selected-badge\">âœ“</div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Chapter Table */}\n        {selectedTextbook && chapterStats.length > 0 && (\n          <div className=\"chapter-table-section\">\n            <h3>ðŸ“‹ Chapters from {selectedTextbook.name}</h3>\n            <div className=\"chapter-table-container\">\n              <table className=\"chapter-table\">\n                <thead>\n                  <tr>\n                    <th>#</th>\n                    <th>Chapter Name</th>\n                    <th>Pages</th>\n                    <th>Questions</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {chapterStats.map((chapter, index) => (\n                    <tr \n                      key={index}\n                      className={selectedChapter?.name === chapter.name ? 'selected-row' : ''}\n                    >\n                      <td className=\"chapter-num\">{index + 1}</td>\n                      <td className=\"chapter-name-cell\">\n                        <strong>{chapter.name}</strong>\n                      </td>\n                      <td className=\"pages-cell\">{chapter.pages}</td>\n                      <td className=\"count-cell\">\n                        <span className={`question-count ${chapter.questionCount > 0 ? 'has-questions' : 'no-questions'}`}>\n                          {chapter.questionCount}\n                        </span>\n                      </td>\n                      <td className=\"action-cell\">\n                        <button\n                          className=\"view-btn\"\n                          onClick={() => handleChapterSelect(chapter)}\n                          disabled={chapter.questionCount === 0}\n                        >\n                          {chapter.questionCount > 0 ? 'View Questions' : 'No Questions'}\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"table-summary\">\n              <p>\n                <strong>Total Chapters:</strong> {chapterStats.length} | \n                <strong> Total Questions:</strong> {chapterStats.reduce((sum, ch) => sum + ch.questionCount, 0)}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Questions Display */}\n        {selectedChapter && (\n          <div className=\"questions-display\">\n            <div className=\"questions-header-info\">\n              <h3>â“ Questions from: {selectedChapter.name}</h3>\n              <div className=\"chapter-meta\">\n                <span className=\"meta-item\">ðŸ“– <strong>Textbook:</strong> {selectedTextbook.name}</span>\n                <span className=\"meta-item\">ðŸ“„ <strong>Pages:</strong> {selectedChapter.pages}</span>\n                <span className=\"meta-item\">ðŸ“ <strong>Paper:</strong> {selectedPaper.title}</span>\n              </div>\n            </div>\n            \n            {loading ? (\n              <div className=\"loading\">\n                <div className=\"spinner\"></div>\n                <p>Loading questions...</p>\n              </div>\n            ) : questions.length === 0 ? (\n              <div className=\"no-questions\">\n                <p>No questions found for this chapter</p>\n                <p className=\"hint\">Try selecting a different chapter</p>\n              </div>\n            ) : (\n              <div className=\"questions-list\">\n                {questions.map((q, index) => {\n                  const estimatedPages = estimateQuestionPageNumber(q.question_text, selectedChapter);\n                  return (\n                  <div key={q.id} className=\"question-item\">\n                    <div className=\"question-header\">\n                      <span className=\"question-number\">Q{q.question_number}</span>\n                      <span \n                        className=\"chapter-page-badge clickable\"\n                        onClick={() => handlePageClick(estimatedPages)}\n                        title=\"Click to view textbook pages\"\n                      >\n                        ðŸ“– Pages: {estimatedPages}\n                      </span>\n                      {q.question_type && (\n                        <span className={`question-type ${q.question_type}`}>\n                          {q.question_type.toUpperCase()}\n                        </span>\n                      )}\n                      {q.marks && (\n                        <span className=\"question-marks\">{q.marks} marks</span>\n                      )}\n                      {q.has_math && (\n                        <span className=\"math-badge\">ðŸ“ Math</span>\n                      )}\n                      {q.has_diagram && (\n                        <span className=\"diagram-badge\">ðŸ“Š Diagram</span>\n                      )}\n                    </div>\n                    <div className=\"question-text\">\n                      {q.question_text}\n                    </div>\n                    {(() => {\n                      // Parse sub_parts if it's a string\n                      let subParts = q.sub_parts;\n                      if (typeof subParts === 'string') {\n                        try {\n                          subParts = JSON.parse(subParts);\n                        } catch (e) {\n                          subParts = [];\n                        }\n                      }\n                      return subParts && Array.isArray(subParts) && subParts.length > 0 && (\n                        <div className=\"sub-parts\">\n                          <strong>Sub-parts:</strong> {subParts.join(', ')}\n                        </div>\n                      );\n                    })()}\n                  </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Textbook Page Modal */}\n      {showTextbookModal && textbookPageToShow && (\n        <div className=\"textbook-modal-overlay\" onClick={handleCloseModal}>\n          <div className=\"textbook-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"textbook-modal-header\">\n              <div className=\"modal-title-section\">\n                <h2>ðŸ“– {textbookPageToShow.textbook.name}</h2>\n                <p className=\"modal-subtitle\">\n                  Chapter: {textbookPageToShow.chapter} | Pages: {textbookPageToShow.pageRange}\n                </p>\n              </div>\n              <button \n                className=\"modal-close-btn\"\n                onClick={handleCloseModal}\n              >\n                âœ•\n              </button>\n            </div>\n            \n            <div className=\"textbook-modal-body\">\n              {/* Viewer Type Selector */}\n              <div className=\"viewer-type-selector\">\n                <button \n                  className={`viewer-type-btn ${viewerType === 'external' ? 'active' : ''}`}\n                  onClick={() => setViewerType('external')}\n                >\n                  ðŸ“– PDF Viewer\n                </button>\n                <button \n                  className={`viewer-type-btn ${viewerType === 'image' ? 'active' : ''}`}\n                  onClick={() => setViewerType('image')}\n                >\n                  ðŸ–¼ï¸ Page Images\n                </button>\n              </div>\n\n              <div className=\"textbook-viewer\">\n                <div className=\"page-info\">\n                  <span className=\"current-page-indicator\">\n                    ðŸ“„ Page {currentPage} of {textbookPageToShow.pageRange}\n                  </span>\n                </div>\n                \n                {/* PDF Viewer - Using uploaded textbook */}\n                {viewerType === 'external' && (\n                  <div className=\"external-link-viewer pdf-viewer-mode\">\n                    {textbookPageToShow.textbook.uploadedFile ? (\n                      <>\n                        <div className=\"pdf-embed-container\">\n                          {pdfLoading && (\n                            <div className=\"pdf-loading-overlay\">\n                              <div className=\"spinner\"></div>\n                              <p>Loading page {currentPage}...</p>\n                            </div>\n                          )}\n                          <iframe\n                            key={`pdf-${currentPage}`}\n                            src={`http://localhost:5000/api/textbook-pdf/${textbookPageToShow.textbook.uploadedId}#page=${currentPage}&zoom=page-fit`}\n                            title={`Textbook Page ${currentPage}`}\n                            className=\"textbook-pdf-iframe\"\n                            frameBorder=\"0\"\n                            allow=\"fullscreen\"\n                            onLoad={() => setPdfLoading(false)}\n                          />\n                        </div>\n                        <div className=\"pdf-viewer-info\">\n                          <p>ðŸ’¡ <strong>Tip:</strong> Use the PDF's built-in navigation or the buttons below to change pages</p>\n                        </div>\n                      </>\n                    ) : (\n                      <>\n                        <div className=\"external-icon\">ðŸ“š</div>\n                        <h3>No Textbook Uploaded</h3>\n                        <p className=\"viewer-description\">\n                          Please upload a textbook file for {textbookPageToShow.textbook.name} to view pages.\n                        </p>\n                        <div className=\"link-info\">\n                          <p><strong>Textbook:</strong> {textbookPageToShow.textbook.name}</p>\n                          <p><strong>Chapter:</strong> {textbookPageToShow.chapter}</p>\n                          <p><strong>Pages:</strong> {textbookPageToShow.pageRange}</p>\n                          <p className=\"upload-hint\">Go to \"Upload Papers\" menu to upload textbook PDFs</p>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                )}\n\n                {/* Image Viewer - Using uploaded textbook pages */}\n                {viewerType === 'image' && (\n                  <div className=\"image-viewer\">\n                    {textbookPageToShow.textbook.uploadedId ? (\n                      <div className=\"image-container\">\n                        <img\n                          src={`http://localhost:5000/api/textbook-page-image/${textbookPageToShow.textbook.uploadedId}/${currentPage}`}\n                          alt={`Page ${currentPage}`}\n                          className=\"textbook-page-image\"\n                          onError={(e) => {\n                            e.target.style.display = 'none';\n                            e.target.nextSibling.style.display = 'flex';\n                          }}\n                        />\n                        <div className=\"image-error\" style={{display: 'none'}}>\n                          <div className=\"error-icon\">ðŸ–¼ï¸</div>\n                          <p>Page image not available</p>\n                          <p className=\"error-hint\">\n                            Page images are generated from the uploaded PDF. \n                            If you're seeing this, the image conversion may not be set up yet.\n                          </p>\n                          <p className=\"error-hint\">Switch to PDF Viewer to see the content.</p>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"image-error\" style={{display: 'flex'}}>\n                        <div className=\"error-icon\">ðŸ–¼ï¸</div>\n                        <p>No textbook uploaded</p>\n                        <p className=\"error-hint\">\n                          Please upload a textbook PDF first to view page images.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Page Navigation */}\n                <div className=\"page-navigation\">\n                  <button \n                    className=\"nav-btn\"\n                    onClick={handlePrevPage}\n                    disabled={currentPage <= textbookPageToShow.startPage}\n                  >\n                    â† Previous\n                  </button>\n                  <span className=\"page-display\">\n                    Page {currentPage}\n                  </span>\n                  <button \n                    className=\"nav-btn\"\n                    onClick={handleNextPage}\n                    disabled={currentPage >= textbookPageToShow.endPage}\n                  >\n                    Next â†’\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"textbook-modal-footer\">\n              <div className=\"footer-info\">\n                <span className=\"page-count\">\n                  {textbookPageToShow.endPage - textbookPageToShow.startPage + 1} pages in range\n                </span>\n              </div>\n              <button \n                className=\"close-modal-btn\"\n                onClick={handleCloseModal}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChapterQuestions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}